# 0560_Subarray_Sum_Equals_K

## 問題

整数 nums の配列と整数 k が与えられたとき、その和が k に等しい部分配列の総数を返す。

## 関連知識

### HashMap

`Map` とは `Key` と `Value` を紐付けてデータを格納するデータ構造のことで、`Key` の重複が許されておらず、`Key` から `Value` を参照するような時に使われる。特定の `Key` が登録されているか1つずつ調べるのは効率的でないので、ハッシュテーブルを使った実装になっており、ハッシュ関数により特定の `Key` に対して出来るだけ一意の値を返すため、全てを調べる必要がなく効率的である。

### collections.defaultdict

汎用の `Python` 組み込みコンテナ `dict` の代わりに、[collections.defaultdict](https://docs.python.org/ja/3.10/library/collections.html) を使うこともできる。`defaultdict` では存在しない  `Key` が入ってもデフォルト値を生成することができるため、状況によってはコードを簡略化することができる。

### Set

`Python` には、[set](https://docs.python.org/ja/3/tutorial/datastructures.html#sets) (集合) を扱うためのデータ型がある。集合とは、重複する要素をもたない、順序づけられていない要素の集まりである。`set` は、数学的な演算もサポートしています。空集合を作成するためには `set()` を使用しなければならず、`{}` だと空の辞書を作成してしまう。

## 解法

与えられた配列をどこかで区切り、その部分の配列の和が目的の値を等しいか調べる必要がある。全てのパターンを計算すると効率がよくないため、今まで計算した部分を `HashMap` に記録しておく。現在の合計値から目的の値を引いた値が `HashMap` にあれば、その部分以降の部分の配列が目的の値と等しくなるため、効率よく計算することができる。ポイントとしては、要素一つで目的の値を満たす場合があるため、予め `HashMap` に 0 を記録しておく。

```
[[1], 1, 1] -> 合計値は1, 1を記録
[[1, 1], 1] -> 合計値は2, 2を記録
[[1, 1, 1]] -> 合計値は3, 3を記録
[1, [1, 1]] -> 計算せずに済む
[1, 1, [1]] -> 計算せずに済む
```