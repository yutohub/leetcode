# 0703_Kth_Largest_Element_in_a_Stream

## 問題

整数kとリストnumsで初期化され、整数valをリストに追加しリストのk番目の最大要素返すaddメソッドを持ったクラスを実装する。

## 関連知識

### Heap, Priority Queue

ヒープは優先度付きキューの実装の1つで、優先度付きキューは含まれる要素が何らかの優先度順に取り出されるという特徴を持っている。新たな要素を追加しても全体をソートすることなく優先度順を保つことができる。n番目に大きい要素が欲しいときなどに使える。

### heapq

優先度付きキューは [heapq](https://docs.python.org/ja/3/library/heapq.html) として標準ライブラリに用意されている。後から要素が追加され、その度に最大 or 最小の要素を早く取り出したい場合に使われる。

```python
import heapq
h = []                         # リストを用意しておく
heapq.heapify(h)               # リストをヒープに変換 (空なら不要)
heapq.heappush(h, 5)           # ヒープに要素追加
n = heapq.heappop(h)           # ヒープから最小値のpop
n = heapq.heappushpop(heap, 6) # pushしたあとにpopできる
n = heapq.heapreplace(heap, 7) # popしたあとにpushできる
```

## 解法

まずは、受け取ったリストをヒープに変換する。k番目に大きいものが分かればいいので、要素数がk以下になるまで最小要素をpopする。要素数がkより小さいときは、ヒープに値いを追加する。要素数がkのときは値を最小値と比較して、ヒープの最小値より大きい場合はヒープの最小値を取り出し、値を追加したあとヒープの最小値を返す。小さい場合はヒープには追加せず、ヒープの最小値を返す。
